<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../core-transition/core-transition.html">
<link rel="import" href="core-key-helper.html">
<link rel="import" href="core-overlay-layer.html">




<style>.core-overlay-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:black;opacity:0;transition:opacity 0.2s;}.core-overlay-backdrop.core-opened{opacity:0.6;}</style>

</head><body><polymer-element name="core-overlay">
<script>!function(){function t(t){window.ShadowDOMPolyfill&&t.offsetHeight}function e(t){var e=o();d.push(t);var i=o();i<=e&&s(t,e)}function i(t){var e=d.indexOf(t);e>=0&&(d.splice(e,1),n(t,""))}function s(t,e){n(t.target,e+2)}function n(t,e){t.style.zIndex=e}function r(){return d[d.length-1]}function o(){var t,e=r();if(e){var i=window.getComputedStyle(e.target).zIndex;isNaN(i)||(t=Number(i))}return t||u}function a(){var t=r();t&&!t.transitioning&&t.applyFocus()}function h(t){if(t.opened)p.push(t);else{var e=p.indexOf(t);e>=0&&p.splice(e,1)}}function l(){return p}Polymer("core-overlay",{publish:{target:null,sizingTarget:null,opened:!1,backdrop:!1,layered:!1,autoCloseDisabled:!1,closeAttribute:"core-overlay-toggle",closeSelector:"",margin:0,transition:"core-transition-fade"},captureEventName:"tap",targetListeners:{tap:"tapHandler",keydown:"keydownHandler","core-transitionend":"transitionend"},registerCallback:function(t){this.layer=document.createElement("core-overlay-layer"),this.keyHelper=document.createElement("core-key-helper"),this.meta=document.createElement("core-transition"),this.scrim=document.createElement("div"),this.scrim.className="core-overlay-backdrop"},ready:function(){this.target=this.target||this,Platform.flush()},toggle:function(){this.opened=!this.opened},open:function(){this.opened=!0},close:function(){this.opened=!1},domReady:function(){this.ensureTargetSetup()},targetChanged:function(t){if(this.target&&(this.target.tabIndex<0&&(this.target.tabIndex=-1),this.addElementListenerList(this.target,this.targetListeners),this.target.style.display="none"),t){this.removeElementListenerList(t,this.targetListeners);var e=this.getTransition();e?e.teardown(t):(t.style.position="",t.style.outline=""),t.style.display=""}},ensureTargetSetup:function(){if(this.target&&!this.target.__overlaySetup){this.target.__overlaySetup=!0,this.target.style.display="";var t=this.getTransition();t&&t.setup(this.target);var e=getComputedStyle(this.target);this.targetStyle={position:"static"===e.position?"fixed":e.position},t||(this.target.style.position=this.targetStyle.position,this.target.style.outline="none"),this.target.style.display="none"}},openedChanged:function(){this.transitioning=!0,this.ensureTargetSetup(),this.prepareRenderOpened(),this.async(function(){this.target.style.display="",this.async("renderOpened")}),this.fire("core-overlay-open",this.opened)},prepareRenderOpened:function(){if(this.opened&&e(this),this.prepareBackdrop(),this.async(function(){this.autoCloseDisabled||this.enableElementListener(this.opened,document,this.captureEventName,"captureHandler",!0)}),this.enableElementListener(this.opened,window,"resize","resizeHandler"),this.opened){if(t(this.target),!this._shouldPosition){this.target.style.position="absolute";var i=getComputedStyle(this.target),s="auto"===i.top&&"auto"===i.bottom,n="auto"===i.left&&"auto"===i.right;this.target.style.position=this.targetStyle.position,this._shouldPosition={top:s,left:n}}this.prepareMeasure(this.target),this.updateTargetDimensions(),this.finishMeasure(this.target),this.layered&&(this.layer.addElement(this.target),this.layer.opened=this.opened)}},renderOpened:function(){var t=this.getTransition();t?t.go(this.target,{opened:this.opened}):this.transitionend(),this.renderBackdropOpened()},transitionend:function(t){t&&t.target!==this.target||(this.transitioning=!1,this.opened||(this.resetTargetDimensions(),this.target.style.display="none",this.completeBackdrop(),i(this),this.layered&&(r()||(this.layer.opened=this.opened),this.layer.removeElement(this.target))),this.applyFocus())},prepareBackdrop:function(){this.backdrop&&this.opened&&(this.scrim.parentNode||(document.body.appendChild(this.scrim),this.scrim.style.zIndex=o()-1),h(this))},renderBackdropOpened:function(){this.backdrop&&l().length<2&&this.scrim.classList.toggle("core-opened",this.opened)},completeBackdrop:function(){this.backdrop&&(h(this),0===l().length&&this.scrim.parentNode.removeChild(this.scrim))},prepareMeasure:function(t){t.style.transition=t.style.webkitTransition="none",t.style.transform=t.style.webkitTransform="none",t.style.display=""},finishMeasure:function(t){t.style.display="none",t.style.transform=t.style.webkitTransform="",t.style.transition=t.style.webkitTransition=""},getTransition:function(){return this.meta.byId(this.transition)},getFocusNode:function(){return this.target.querySelector("[autofocus]")||this.target},applyFocus:function(){var t=this.getFocusNode();this.opened?t.focus():(t.blur(),r()==this?console.warn("Current core-overlay is attempting to focus itself as next! (bug)"):a())},updateTargetDimensions:function(){if(this.positionTarget(),this.sizeTarget(),this.layered){var t=this.target.getBoundingClientRect();this.target.style.top=t.top+"px",this.target.style.left=t.left+"px",this.target.style.right=this.target.style.bottom="auto"}},sizeTarget:function(){var t=this.sizingTarget||this.target,e=t.getBoundingClientRect(),i=e.top===this.margin?this.margin:2*this.margin,s=e.left===this.margin?this.margin:2*this.margin,n=window.innerHeight-e.top-i,r=window.innerWidth-e.left-s;t.style.maxHeight=n+"px",t.style.maxWidth=r+"px",t.style.boxSizing="border-box"},positionTarget:function(){if(this._shouldPosition.top){var t=Math.max((window.innerHeight-this.target.offsetHeight-2*this.margin)/2,this.margin);this.target.style.top=t+"px"}if(this._shouldPosition.left){var e=Math.max((window.innerWidth-this.target.offsetWidth-2*this.margin)/2,this.margin);this.target.style.left=e+"px"}},resetTargetDimensions:function(){this.target.style.top=this.target.style.left="",this.target.style.right=this.target.style.bottom="",this.target.style.width=this.target.style.height="",this._shouldPosition=null},tapHandler:function(t){t.target&&this.closeSelector&&t.target.matches(this.closeSelector)||this.closeAttribute&&t.target.hasAttribute(this.closeAttribute)?this.toggle():this.autoCloseJob&&(this.autoCloseJob.stop(),this.autoCloseJob=null)},captureHandler:function(t){this.autoCloseDisabled||r()!=this||(this.autoCloseJob=this.job(this.autoCloseJob,function(){this.close()}))},keydownHandler:function(t){this.autoCloseDisabled||t.keyCode!=this.keyHelper.ESCAPE_KEY||(this.close(),t.stopPropagation())},resizeHandler:function(){this.updateTargetDimensions()},addElementListenerList:function(t,e){for(var i in e)this.addElementListener(t,i,e[i])},removeElementListenerList:function(t,e){for(var i in e)this.removeElementListener(t,i,e[i])},enableElementListener:function(t,e,i,s,n){t?this.addElementListener(e,i,s,n):this.removeElementListener(e,i,s,n)},addElementListener:function(t,e,i,s){var n=this._makeBoundListener(i);t&&n&&Polymer.addEventListener(t,e,n,s)},removeElementListener:function(t,e,i,s){var n=this._makeBoundListener(i);t&&n&&Polymer.removeEventListener(t,e,n,s)},_makeBoundListener:function(t){var e=this,i=this[t];if(i){var s="_bound"+t;return this[s]||(this[s]=function(t){i.call(e,t)}),this[s]}}});var d=[],u=10,p=[]}();</script>
</polymer-element>
</body></html>